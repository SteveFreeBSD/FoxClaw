# WS-80 Evidence (2026-02-28)

WS-80 closes the matrix-lane soak failure that the overnight live run exposed. The defect was not in scan semantics or finding generation; it was the soak harness invoking Docker through a shell function that `timeout` could not execute.

## Failure Mode Fixed

Pre-fix overnight soak evidence showed every matrix stage failing with:

```text
timeout: failed to run command ‘docker_exec’: No such file or directory
```

Representative pre-fix artifacts:

- `/var/tmp/foxclaw-e2e-20260227T174944Z/soak/20260228T022838Z-e2e-live-foxclaw-e2e-20260227t174944z/logs/cycle-80-matrix-1-beta-build.log`
- `/var/tmp/foxclaw-e2e-20260227T174944Z/soak/20260228T022838Z-e2e-live-foxclaw-e2e-20260227t174944z/results.tsv`

## Post-Fix Reduced Gate Command

Command used to validate the fix on `main` after adding the executable Docker wrapper:

```bash
scripts/soak_runner.sh \
  --duration-hours 1 \
  --max-cycles 1 \
  --stage-timeout-seconds 1800 \
  --integration-runs 1 \
  --snapshot-runs 1 \
  --synth-count 1 \
  --fuzz-count 1 \
  --adversary-runs 0 \
  --siem-wazuh-runs 1 \
  --matrix-runs 1 \
  --label ws80-gate
```

Observed passing run:

- `/var/tmp/foxclaw-soak/20260228T103227Z-ws80-gate`

## PASS Summary

Observed `summary.txt`:

```text
overall_status=PASS
cycles_completed=1
steps_total=16
steps_failed=0
soak_summary_json=/var/tmp/foxclaw-soak/20260228T103227Z-ws80-gate/soak-summary.json
```

Observed `soak-summary.json` excerpt:

```json
{
  "artifact_root_path": "/var/tmp/foxclaw-soak/20260228T103227Z-ws80-gate",
  "memory_index_status": "ok",
  "ndjson_event_counts": {
    "foxclaw.finding": 4,
    "foxclaw.scan.summary": 1
  },
  "overall_status": "PASS",
  "stage_counts": {
    "matrix_build_beta": {
      "fail": 0,
      "pass": 1
    },
    "matrix_build_esr": {
      "fail": 0,
      "pass": 1
    },
    "matrix_build_nightly": {
      "fail": 0,
      "pass": 1
    },
    "matrix_scan_beta": {
      "fail": 0,
      "pass": 1
    },
    "matrix_scan_esr": {
      "fail": 0,
      "pass": 1
    },
    "matrix_scan_nightly": {
      "fail": 0,
      "pass": 1
    },
    "matrix_version_beta": {
      "fail": 0,
      "pass": 1
    },
    "matrix_version_esr": {
      "fail": 0,
      "pass": 1
    },
    "matrix_version_nightly": {
      "fail": 0,
      "pass": 1
    },
    "siem_wazuh": {
      "fail": 0,
      "pass": 1
    }
  },
  "wazuh_image": "wazuh/wazuh-manager:4.14.3"
}
```

## Matrix Proof

Observed `results.tsv` excerpt:

```text
1	siem_wazuh	1	0	PASS	13	2026-02-28T10:32:34Z	2026-02-28T10:32:47Z	/var/tmp/foxclaw-soak/20260228T103227Z-ws80-gate/logs/cycle-1-siem-wazuh-1.log	/var/tmp/foxclaw-soak/20260228T103227Z-ws80-gate/siem-wazuh/cycle-1-run-1
1	matrix_build_esr	1	0	PASS	97	2026-02-28T10:32:47Z	2026-02-28T10:34:24Z	/var/tmp/foxclaw-soak/20260228T103227Z-ws80-gate/logs/cycle-1-matrix-1-esr-build.log	-
1	matrix_version_esr	1	0	PASS	1	2026-02-28T10:34:24Z	2026-02-28T10:34:25Z	/var/tmp/foxclaw-soak/20260228T103227Z-ws80-gate/logs/cycle-1-matrix-1-esr-version.log	-
1	matrix_scan_esr	1	0	PASS	47	2026-02-28T10:34:25Z	2026-02-28T10:35:12Z	/var/tmp/foxclaw-soak/20260228T103227Z-ws80-gate/logs/cycle-1-matrix-1-esr-scan.log	-
1	matrix_build_beta	1	0	PASS	39	2026-02-28T10:35:12Z	2026-02-28T10:35:51Z	/var/tmp/foxclaw-soak/20260228T103227Z-ws80-gate/logs/cycle-1-matrix-1-beta-build.log	-
1	matrix_version_beta	1	0	PASS	1	2026-02-28T10:35:51Z	2026-02-28T10:35:52Z	/var/tmp/foxclaw-soak/20260228T103227Z-ws80-gate/logs/cycle-1-matrix-1-beta-version.log	-
1	matrix_scan_beta	1	0	PASS	47	2026-02-28T10:35:52Z	2026-02-28T10:36:39Z	/var/tmp/foxclaw-soak/20260228T103227Z-ws80-gate/logs/cycle-1-matrix-1-beta-scan.log	-
1	matrix_build_nightly	1	0	PASS	44	2026-02-28T10:36:39Z	2026-02-28T10:37:23Z	/var/tmp/foxclaw-soak/20260228T103227Z-ws80-gate/logs/cycle-1-matrix-1-nightly-build.log	-
1	matrix_version_nightly	1	0	PASS	0	2026-02-28T10:37:23Z	2026-02-28T10:37:23Z	/var/tmp/foxclaw-soak/20260228T103227Z-ws80-gate/logs/cycle-1-matrix-1-nightly-version.log	-
1	matrix_scan_nightly	1	0	PASS	47	2026-02-28T10:37:23Z	2026-02-28T10:38:10Z	/var/tmp/foxclaw-soak/20260228T103227Z-ws80-gate/logs/cycle-1-matrix-1-nightly-scan.log	-
```

Observed `matrix_scan_nightly` tail shows the container scan completed and wrote artifacts rather than dying on command startup:

```text
JSON report written to: /tmp/firefox-container-artifacts-nightly/foxclaw.json
SARIF report written to: /tmp/firefox-container-artifacts-nightly/foxclaw.sarif
Snapshot report written to: /tmp/firefox-container-artifacts-nightly/foxclaw.snapshot.json
[container-smoke] findings_total: 6
```

## Wazuh Lane Confirmation

Observed `siem-wazuh/cycle-1-run-1/manifest.json` confirms the pinned image and NDJSON counts:

```json
{
  "ndjson_event_counts": {
    "foxclaw.finding": 4,
    "foxclaw.scan.summary": 1
  },
  "status": "PASS",
  "wazuh_image": "wazuh/wazuh-manager:4.14.3"
}
```
